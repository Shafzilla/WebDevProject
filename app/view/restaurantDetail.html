<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Title</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" xintegrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">


    <style>

        .menu-list-item{
            /*height: 100%;*/
            /*width: 100%;*/
            border: 1px solid #ccc;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);

        }

        .menu-list-item:hover{

            background-color: #ccc;

        }

        .no-dishes-found-style {

            margin: auto;
            width: 50%;
            padding: 10px;
        }




    </style>
</head>
<body>
    <nav class="navbar bg-body-tertiary">
        <div class="container-fluid">
            <a class="navbar-brand" href="/">
                <img src="https://media.istockphoto.com/id/1276417606/vector/fork-knife-and-spoon-icon-logo-simple-flat-shape-sign-restaurant-cafe-kitchen-diner-place.jpg?s=612x612&w=0&k=20&c=jTFePmR22yEBLGFHvh5QaLoEVPjE08ZzseaXpJqj0v4=" alt="Logo" width="30" height="24" class="d-inline-block align-text-top">
                WebDevProject
            </a>
        </div>
    </nav>
    <div class="container py-4">
        <h1 class="text-center mb-4">Dishes</h1>
        <ul id="dish-list" class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4 list-unstyled"></ul>

    </div>
    <script>



        async function fetchDishesByRestaurantId(restaurantId) {

            const res = await fetch(`/api/restaurants/${restaurantId}/dishes`);
            const data = await res.json();

            if (data.length === 0) {

                const place = document.getElementById('dish-list');
                const noDishesText = document.createElement('p');
                noDishesText.innerHTML = `
                    <p class="container p-5">...No dishes found</p>



                `
                place.appendChild(noDishesText);


            }
            else {


                const list = document.getElementById('dish-list');
                data.forEach(r => {
                    const colDiv = document.createElement('div');
                    colDiv.className = 'col';


                    const li = document.createElement('li');
                    li.className = 'menu-list-item p-4 shadow-sm';


                    li.innerHTML = `
                        <div class="d-flex justify-content-between align-items-center">
                            <div class="d-flex align-items-center">
                                <h3>${r.name}</h3>
                                <span class="ms-3 me-4 text-end">
                                     <br>
                                    <span class="text-primary fw-light">${r.description}</span>
                                    <p>$${r.price}</p>
                                </span>
                            </div>
                        </div>
                        <p class="text-secondary small mt-2 fst-italic"></p>
                    `;


                    colDiv.appendChild(li);

                    list.appendChild(colDiv);
                });
            }
        }

        function getRestaurantId() {

            const path = window.location.pathname;
            const segments = path.split('/');

            const restaurantId = segments[2];

            return parseInt(restaurantId, 10)


        }

        restaurantId = getRestaurantId()
        fetchDishesByRestaurantId(restaurantId);

    </script>



</body>
</html>